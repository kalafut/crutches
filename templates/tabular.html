<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="css/default.css">
    <script src="js/keymaster.min.js"></script>
    <script src="js/zepto.min.js"></script>
    <script src="js/handlebars.min.js"></script>
    <script src="js/crutch.js"></script>
    <script>    
        $(document).ready(function() {
            key("alt+a, ⌘+a", function() {
                $(".project_active").prop("checked",true);
                Crutch.filter();
            });
            key("alt+n, ⌘+n", function() {
                $(".project_active").prop("checked",false);
                Crutch.filter();
            });
            key("ctrl+1, enter", function() {
                window.open($(".entry:not(.hidden) a").attr("href"), "_self");// "detail_pg");
            });
            // To be fixed and extended...
            key("ctrl+2", function() {
                window.open($($(".entry:not(.hidden) a")[1]).attr("href"));
            });
        });
        Crutch.render = function(template, data) {
            return Handlebars.compile(template)(data);
        };
    </script>

</head>
    <body>
        <div style="width:80%; margin:20px;">
        <div id="sidebar">
            <input id="search" type="text"/>
            {{#each projects}}
            <br><input class="project_active" type="checkbox" data-uid="{{this.uid}}" checked="checked" />{{this.project}}
            {{/each}}
        </div>
        <div id="main">
            {{#each projects}} <h1 class="project" id="{{this.uid}}">{{this.project}}</h1>
                {{#if this.description}}
                   {{this.description}}
                {{/if}}
                {{#each sections}}<h3 class="section" id="{{this.uid}}"> {{this.section}}</h3>
                {{#if this.description}}
                   {{this.description}}
                {{/if}}
                <table>
                    {{#each entries}}
                    <tr class="entry" id="{{this.uid}}">
                        {{#if this.term}}
                        <td>
                            {{#if this.entry_url }}
                            <a href="{{this.entry_url}}" target="detail_pg">{{{this.term}}}</a>
                            {{else}}
                            {{{this.term}}}
                            {{/if}}
                        </td>
                        <td>{{{this.description}}}</td>
                        {{else}}
                        <td colspan="2">{{{this.description}}}</td>
                        {{/if}}
                    </tr>
                    {{/each}}
                </table>

                {{/each}}
            {{/each}}
        </div>
    </div>

    </body>
</html>

